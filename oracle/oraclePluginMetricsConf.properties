DatabasesSize = SELECT sum(bytes)/1024/1024/1024 from dba_segments
USERSSIZE = SELECT Sum(bytes)/1024/1024/1024 From Dba_Segments T WHERE T.TABLESPACE_NAME='USERS' GROUP BY T.TABLESPACE_NAME
USERSFreeSize = SELECT sum(T.bytes)/1024/1024/1024 from dba_free_space T WHERE T.tablespace_name='USERS' group by tablespace_name
ASMDataFreeSize = SELECT T.free_mb/1024 from v$asm_diskgroup t where t.name='DATA'
USERS.dbf.last.size = SELECT TT.DBTTL/1024/1024/1024 DBTTL  FROM  (SELECT T1.TABLESPACE_NAME ,T1.FILE_NAME,T1.FILE_ID ,T1.DBTTL,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL  FROM  SYS.DBA_DATA_FILES t  WHERE T.TABLESPACE_NAME='USERS' AND T.FILE_NAME LIKE '%.dbf'   GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,( SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t  WHERE T.TABLESPACE_NAME='USERS'  GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=1
USERS.dbf.last2.size = SELECT TT.DBTTL/1024/1024/1024 DBTTL  FROM  (SELECT T1.TABLESPACE_NAME ,T1.FILE_NAME,T1.FILE_ID ,T1.DBTTL,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL  FROM  SYS.DBA_DATA_FILES t  WHERE T.TABLESPACE_NAME='USERS'         AND T.FILE_NAME LIKE '%.dbf'   GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,( SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t  WHERE T.TABLESPACE_NAME='USERS'  GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=2
USERS.dbf.last.free = SELECT TT.DBFREE/1024/1024/1024 DBFREE   FROM  (SELECT T1.TABLESPACE_NAME,T1.FILE_NAME ,T1.FILE_ID ,T1.DBTTL ,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL         FROM  SYS.DBA_DATA_FILES t  WHERE T.TABLESPACE_NAME='USERS'  AND     T.FILE_NAME LIKE '%.dbf'  GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,(SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t WHERE T.TABLESPACE_NAME='USERS'  GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=1
USERS.dbf.last2.free = SELECT TT.DBFREE/1024/1024/1024 DBFREE   FROM  (SELECT T1.TABLESPACE_NAME,T1.FILE_NAME ,T1.FILE_ID ,T1.DBTTL ,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL         FROM  SYS.DBA_DATA_FILES t  WHERE T.TABLESPACE_NAME='USERS'  AND     T.FILE_NAME LIKE '%.dbf'  GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,(SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t WHERE T.TABLESPACE_NAME='USERS'  GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=2
USERS.dbf.last.used = SELECT (TT.DBTTL-TT.DBFREE)/1024/1024/1024 DBUSED FROM  (SELECT T1.TABLESPACE_NAME ,T1.FILE_NAME ,T1.FILE_ID ,T1.DBTTL,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL         FROM  SYS.DBA_DATA_FILES t WHERE T.TABLESPACE_NAME='USERS' AND     T.FILE_NAME LIKE '%.dbf' GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,(SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t WHERE T.TABLESPACE_NAME='USERS' GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=1
USERS.dbf.last2.used = SELECT (TT.DBTTL-TT.DBFREE)/1024/1024/1024 DBUSED FROM  (SELECT T1.TABLESPACE_NAME ,T1.FILE_NAME ,T1.FILE_ID ,T1.DBTTL,T2.DBFREE ,row_number() OVER(ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) tmpid FROM  (SELECT T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID,SUM(T.BYTES) DBTTL         FROM  SYS.DBA_DATA_FILES t WHERE T.TABLESPACE_NAME='USERS' AND     T.FILE_NAME LIKE '%.dbf' GROUP BY T.TABLESPACE_NAME,T.FILE_NAME,T.FILE_ID) T1 ,(SELECT T.TABLESPACE_NAME,T.FILE_ID,SUM(T.BYTES) DBFREE FROM SYS.DBA_FREE_SPACE t WHERE T.TABLESPACE_NAME='USERS' GROUP BY T.TABLESPACE_NAME,T.FILE_ID) T2 WHERE T1.TABLESPACE_NAME=T2.TABLESPACE_NAME AND T1.FILE_ID=T2.FILE_ID GROUP BY T1.TABLESPACE_NAME,T1.FILE_NAME,T1.FILE_ID,T1.DBTTL,T2.DBFREE ORDER BY  TO_NUMBER(SUBSTR(file_name,LENGTH(file_name)-5,2)) DESC) TT  WHERE TT.TMPID=2
